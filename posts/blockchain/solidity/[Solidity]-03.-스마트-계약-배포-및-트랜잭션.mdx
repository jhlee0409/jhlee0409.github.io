---
title: "[Solidity] 03. 스마트 계약 배포 및 트랜잭션"
date: "2022-09-04"
tags: ["TIL", "Remix", "Solidity", 'Deploy', "Transaction"]
draft: false
summary: "Remix를 이용해서 스마트 계약을 배포하고 트랜잭션 해보자"
---

# 서론
- 계약을 작성했다면 배포하고 실제로 트랜잭션을 해보자.
- [Solidity 01](https://jhlee0409.github.io/blockchain-solidity/article/Solidity-01)에서 작성한 기본적인 `contract`로 배포를 진행할 예정이다.


# 스마트 계약 배포하기

- 배포를 위해 `Remix` 좌측 메뉴에서 `Deploy & run transactions` 버튼을 클릭해준다.

![Remix 좌측 메뉴](/assets/posts/blockchain/solidity/Solidity-03/01.png)

## 설정하기
- 배포 페이지에서는 아래와 같은 배포를 위한 설정을 할 수 있다.

![배포 환경 설정](/assets/posts/blockchain/solidity/Solidity-03/02.png)

#### 각 설정 설명
- `ENVIRONMENT` : 배포할 환경 선택 / `VM = Virtual Machine`
- `ACCOUNT` : 목록을 열어보면 여러 계정들이 있는데 전부 이더를 보내거나 스마트 계약과 트랜잭션을 위한 `테스트 계정`이다.
- `GAS LIMIT` : 트랜잭션에 사용되는 가스비(수수료)의 최대치
- `VALUE` : 계약이나 이더 전송 스마트 계약에 쓰이는 값을 설정한다. `ETH, WEI, GWE`는 `ml, l`와 같은 ETH의 단위
- `CONTRACT` : 실행 및 배포할 계약을 선택

## 배포하기
- 배포 설정이 끝났다면 `Deploy`를 클릭한다.
- 배포를 진행하면 콘솔 창에서 결과를 확인할 수 있다.

![우측 Debug를 클릭하면 상세 정보를 확인할 수 있다.](/assets/posts/blockchain/solidity/Solidity-03/03.png)

- 좌측에 성공 체크가 있으면 배포를 성공적으로 완료했다는 뜻이다.
- `0x5B3…eddc` = 계정 주소
- 해당 계정을 통해 스마트 계약을 블록체인에 업로드 했기 때문에 이더를 소모 (가스비)
- 해당 계정에서 `simpleStorage` 를 배포했다는 것도 확인 가능
- 이외에도 배포를 위해 설정했던 값들을 볼 수 있다.

# 스마트 계약과 트랜잭션하기

- 배포를 성공하고 나면 이제 트랜잭션이 가능하다. 바로 한번 해보자!

## 배포 이후 추가된 정보 확인

- 배포 이후 `배포 설정` 하단에 아래와 같은 부분이 생겨났을 것이다.
- 배포한 스마트 계약(`simpleStorage`)이 보일 것이다.

![배포 성공 이후 새로운 부분이 나타난다.](/assets/posts/blockchain/solidity/Solidity-03/04.png)
![해당 계약 좌측에 화살표를 누르면 상세 정보를 볼 수 있다.](/assets/posts/blockchain/solidity/Solidity-03/05.png)

- `set`과 `get`은 `simpleStorage` 계약에서 만든 `function`이다.
- 해당 `function`은 `Remix IDE`에서 사용할 수 있게 된다.
- 따라서 데이터를 저장하고 가져오는 것이 가능하다. (`set`과 `get`을 만들었으니)

## `set()` 트랜잭션 실행하기

> e.g. `set`에 `68`을 입력하고 `set 버튼`을 누르면 트랜잭션이 일어난다.

![set에 68을 입력한다.](/assets/posts/blockchain/solidity/Solidity-03/06.png)
![트랙잭션 결과는 콘솔 창에서 확인 가능하다.](/assets/posts/blockchain/solidity/Solidity-03/07.png)
![우측 화살표를 누르면 상세 정보 확인 가능하다.](/assets/posts/blockchain/solidity/Solidity-03/08.png)

- 트랜잭션이 발생할 때마다 가스비가 발생한다.
- 트랜잭션이 어느 계정에서 발생했는지 알 수 있다. (`from`)
- 스마트 계약의 주소도 확인 가능하다. (`to`)

## `get()` 트랜잭션 실행하기

- `set`을 이용해 데이터를 저장했다면 당연 `get`을 이용해 저장한 데이터를 불러올 수 있다.
- `get`버튼을 누르면 바로 트랜잭션이 일어난다.
- 저장한 데이터를 불러오는 것은 거래가 발생하는 것이 아니기에 가스비가 발생하지 않는다.

![get을 누르면 set에서 입력한 68을 반환한다.](/assets/posts/blockchain/solidity/Solidity-03/09.png)
![콘솔 창에서 결과를 확인 할 수 있다.](/assets/posts/blockchain/solidity/Solidity-03/10.png)

# 결론

- 모든 트랜잭션은 블록체인에 기록된다.
- 이로써 `DApp`에서 블록체인 개발에 필요한 기본적인 내용을 학습했다.

#

### 참조

[remix Deploy & Run](https://remix-ide.readthedocs.io/en/latest/run.html)

#

#### 피드백은 언제나 환영입니다.